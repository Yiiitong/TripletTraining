data_dir: /path/to/data
seed: 0
name: Barlow_TripletTraining
callbacks:
  model_checkpoint:
    _target_: pytorch_lightning.callbacks.ModelCheckpoint
    monitor: val/loss
    mode: min
    save_top_k: 0
    save_last: true
    dirpath: checkpoints/
    filename: epoch_{epoch:03d}-loss
  learning_rate_monitor:
    _target_: pytorch_lightning.callbacks.LearningRateMonitor
    logging_interval: epoch
    log_momentum: false
datamodule:
  _target_: addiagnosis.datamodules.uk_biobank.UKBioBankDataModule
  path: /path/to/UKBiobank
  batch_size: 128
  num_workers: 12
  is_ssl: true
  resize_height: 55
model:
  _target_: addiagnosis.modules.barlow_twins.Barlow_Twins_Module
  lr: 0.5
  weight_decay: 1.5e-06
  pretrained_model: null
  batch_size: 64
  encoder_out_dim: 512
  z_dim: 2048
  lambda_coeff: 0.005
  warmup_epochs: 10
  net:
    _target_: addiagnosis.models.resnet.SingleResNet
    in_channels: 1
    n_blocks: 6
    bn_momentum: 0.05
    n_basefilters: 16
    dropout_rate: 0.1
    resnet_version: base
    remain_downsample_steps: null
logger:
  tensorboard:
    _target_: pytorch_lightning.loggers.tensorboard.TensorBoardLogger
    save_dir: logs/
    name: null
    version: ${name}
    log_graph: false
    default_hp_metric: true
    prefix: ''
trainer:
  _target_: pytorch_lightning.Trainer
  accelerator: gpu
  min_epochs: 1
  max_epochs: 100
  detect_anomaly: true
  log_every_n_steps: 25
  resume_from_checkpoint: null
